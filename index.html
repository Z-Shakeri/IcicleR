<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<style>body{background-color:white;}</style>
<script src="lib/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="lib/sequences-0.1/sequences.css" rel="stylesheet" />
<script src="lib/sunburst-binding-2.1.5/sunburst.js"></script>
<script src="lib/d3-4.13.0/d3.min.js"></script>
  <script src="https://unpkg.com/flubber"></script>
</head>
<body>
<button id="convert-btn" style="color: black; background-color:#E8E8D3;&#10;                left: 10%; width: 100px; height: 30px; border-radius: 6px; font-size:90%">Iciclize</button>
<div class="sunburst html-widget" id="htmlwidget-28a84faa6a8d9bff479e" style="width:960px;height:500px; position:relative;">
  <div>
    <div class="sunburst-main">
      <div class="sunburst-sequence"></div>
      <div class="sunburst-chart">
        <div class="sunburst-explanation" style="visibility:hidden;"></div>
      </div>
    </div>
    <div class="sunburst-sidebar">
      <input type="checkbox" class="sunburst-togglelegend" style="visibility:hidden;">Legend</input>
      <div class="sunburst-legend" style="visibility:hidden;"></div>
    </div>
  </div>
</div>
<script type="application/json" data-for="htmlwidget-28a84faa6a8d9bff479e">{"x":{"data":{"children":[{"name":"All countries","children":[{"name":"0 - 2","children":[{"name":"Female","size":0.3696,"colname":"X3"},{"name":"Male","size":0.5796,"colname":"X3"}],"colname":"X2"},{"name":"3 - 5","children":[{"name":"Female","size":0.0663,"colname":"X3"},{"name":"Male","size":0.0869,"colname":"X3"}],"colname":"X2"},{"name":"6 - 11","children":[{"name":"Female","size":1.2415,"colname":"X3"},{"name":"Male","size":0.7535,"colname":"X3"}],"colname":"X2"},{"name":"12 - 17","children":[{"name":"Female","size":0.5591,"colname":"X3"},{"name":"Male","size":0.3961,"colname":"X3"}],"colname":"X2"},{"name":"18 - 25","children":[{"name":"Female","size":7.2498,"colname":"X3"},{"name":"Male","size":3.41,"colname":"X3"}],"colname":"X2"},{"name":"26 - 49","children":[{"name":"Female","size":39.2058,"colname":"X3"},{"name":"Male","size":28.7191,"colname":"X3"}],"colname":"X2"},{"name":"50 - 69","children":[{"name":"Female","size":29.1793,"colname":"X3"},{"name":"Male","size":38.5626,"colname":"X3"}],"colname":"X2"},{"name":"70 - 79","children":[{"name":"Female","size":8.823,"colname":"X3"},{"name":"Male","size":15.3883,"colname":"X3"}],"colname":"X2"},{"name":"80+","children":[{"name":"Female","size":13.3055,"colname":"X3"},{"name":"Male","size":12.1039,"colname":"X3"}],"colname":"X2"}],"colname":"X1"},{"name":"France","children":[{"name":"0 - 2","children":[{"name":"Female","size":0.3894,"colname":"X3"},{"name":"Male","size":0.6744,"colname":"X3"}],"colname":"X2"},{"name":"3 - 5","children":[{"name":"Female","size":0.0811,"colname":"X3"},{"name":"Male","size":0,"colname":"X3"}],"colname":"X2"},{"name":"6 - 11","children":[{"name":"Female","size":0.1136,"colname":"X3"},{"name":"Male","size":0.1383,"colname":"X3"}],"colname":"X2"},{"name":"12 - 17","children":[{"name":"Female","size":0.4056,"colname":"X3"},{"name":"Male","size":0.3631,"colname":"X3"}],"colname":"X2"},{"name":"18 - 25","children":[{"name":"Female","size":7.5762,"colname":"X3"},{"name":"Male","size":2.9224,"colname":"X3"}],"colname":"X2"},{"name":"26 - 49","children":[{"name":"Female","size":40.6879,"colname":"X3"},{"name":"Male","size":27.9786,"colname":"X3"}],"colname":"X2"},{"name":"50 - 69","children":[{"name":"Female","size":28.0013,"colname":"X3"},{"name":"Male","size":38.7688,"colname":"X3"}],"colname":"X2"},{"name":"70 - 79","children":[{"name":"Female","size":7.8358,"colname":"X3"},{"name":"Male","size":15.5283,"colname":"X3"}],"colname":"X2"},{"name":"80+","children":[{"name":"Female","size":14.9091,"colname":"X3"},{"name":"Male","size":13.6261,"colname":"X3"}],"colname":"X2"}],"colname":"X1"},{"name":"Germany","children":[{"name":"0 - 2","children":[{"name":"Female","size":1.2158,"colname":"X3"},{"name":"Male","size":0.8772,"colname":"X3"}],"colname":"X2"},{"name":"3 - 5","children":[{"name":"Female","size":0,"colname":"X3"},{"name":"Male","size":1.1696,"colname":"X3"}],"colname":"X2"},{"name":"6 - 11","children":[{"name":"Female","size":0.9119,"colname":"X3"},{"name":"Male","size":1.462,"colname":"X3"}],"colname":"X2"},{"name":"12 - 17","children":[{"name":"Female","size":2.1277,"colname":"X3"},{"name":"Male","size":1.7544,"colname":"X3"}],"colname":"X2"},{"name":"18 - 25","children":[{"name":"Female","size":10.0304,"colname":"X3"},{"name":"Male","size":6.7251,"colname":"X3"}],"colname":"X2"},{"name":"26 - 49","children":[{"name":"Female","size":40.4255,"colname":"X3"},{"name":"Male","size":35.6725,"colname":"X3"}],"colname":"X2"},{"name":"50 - 69","children":[{"name":"Female","size":28.5714,"colname":"X3"},{"name":"Male","size":33.0409,"colname":"X3"}],"colname":"X2"},{"name":"70 - 79","children":[{"name":"Female","size":7.5988,"colname":"X3"},{"name":"Male","size":9.3567,"colname":"X3"}],"colname":"X2"},{"name":"80+","children":[{"name":"Female","size":9.1185,"colname":"X3"},{"name":"Male","size":9.9415,"colname":"X3"}],"colname":"X2"}],"colname":"X1"},{"name":"Italy","children":[{"name":"0 - 2","children":[{"name":"Female","size":0,"colname":"X3"},{"name":"Male","size":0,"colname":"X3"}],"colname":"X2"},{"name":"3 - 5","children":[{"name":"Female","size":0,"colname":"X3"},{"name":"Male","size":0,"colname":"X3"}],"colname":"X2"},{"name":"6 - 11","children":[{"name":"Female","size":0,"colname":"X3"},{"name":"Male","size":0,"colname":"X3"}],"colname":"X2"},{"name":"12 - 17","children":[{"name":"Female","size":0,"colname":"X3"},{"name":"Male","size":0,"colname":"X3"}],"colname":"X2"},{"name":"18 - 25","children":[{"name":"Female","size":0.5891,"colname":"X3"},{"name":"Male","size":0.4215,"colname":"X3"}],"colname":"X2"},{"name":"26 - 49","children":[{"name":"Female","size":26.1414,"colname":"X3"},{"name":"Male","size":17.0179,"colname":"X3"}],"colname":"X2"},{"name":"50 - 69","children":[{"name":"Female","size":34.9779,"colname":"X3"},{"name":"Male","size":43.941,"colname":"X3"}],"colname":"X2"},{"name":"70 - 79","children":[{"name":"Female","size":17.1576,"colname":"X3"},{"name":"Male","size":23.1296,"colname":"X3"}],"colname":"X2"},{"name":"80+","children":[{"name":"Female","size":21.134,"colname":"X3"},{"name":"Male","size":15.49,"colname":"X3"}],"colname":"X2"}],"colname":"X1"},{"name":"Singapore","children":[{"name":"0 - 2","children":[{"name":"Female","size":3.3333,"colname":"X3"},{"name":"Male","size":3.5714,"colname":"X3"}],"colname":"X2"},{"name":"3 - 5","children":[{"name":"Female","size":0,"colname":"X3"},{"name":"Male","size":3.5714,"colname":"X3"}],"colname":"X2"},{"name":"6 - 11","children":[{"name":"Female","size":0,"colname":"X3"},{"name":"Male","size":0,"colname":"X3"}],"colname":"X2"},{"name":"12 - 17","children":[{"name":"Female","size":3.3333,"colname":"X3"},{"name":"Male","size":0,"colname":"X3"}],"colname":"X2"},{"name":"18 - 25","children":[{"name":"Female","size":20,"colname":"X3"},{"name":"Male","size":25,"colname":"X3"}],"colname":"X2"},{"name":"26 - 49","children":[{"name":"Female","size":56.6667,"colname":"X3"},{"name":"Male","size":42.8571,"colname":"X3"}],"colname":"X2"},{"name":"50 - 69","children":[{"name":"Female","size":16.6667,"colname":"X3"},{"name":"Male","size":21.4286,"colname":"X3"}],"colname":"X2"},{"name":"70 - 79","children":[{"name":"Female","size":0,"colname":"X3"},{"name":"Male","size":3.5714,"colname":"X3"}],"colname":"X2"},{"name":"80+","children":[{"name":"Female","size":0,"colname":"X3"},{"name":"Male","size":0,"colname":"X3"}],"colname":"X2"}],"colname":"X1"},{"name":"USA","children":[{"name":"0 - 2","children":[{"name":"Female","size":0.3744,"colname":"X3"},{"name":"Male","size":0.7388,"colname":"X3"}],"colname":"X2"},{"name":"3 - 5","children":[{"name":"Female","size":0.0749,"colname":"X3"},{"name":"Male","size":0.1738,"colname":"X3"}],"colname":"X2"},{"name":"6 - 11","children":[{"name":"Female","size":4.5301,"colname":"X3"},{"name":"Male","size":2.8249,"colname":"X3"}],"colname":"X2"},{"name":"12 - 17","children":[{"name":"Female","size":0.9734,"colname":"X3"},{"name":"Male","size":0.6084,"colname":"X3"}],"colname":"X2"},{"name":"18 - 25","children":[{"name":"Female","size":9.3972,"colname":"X3"},{"name":"Male","size":6.3451,"colname":"X3"}],"colname":"X2"},{"name":"26 - 49","children":[{"name":"Female","size":42.0816,"colname":"X3"},{"name":"Male","size":39.0265,"colname":"X3"}],"colname":"X2"},{"name":"50 - 69","children":[{"name":"Female","size":29.1651,"colname":"X3"},{"name":"Male","size":34.6371,"colname":"X3"}],"colname":"X2"},{"name":"70 - 79","children":[{"name":"Female","size":7.1134,"colname":"X3"},{"name":"Male","size":9.6914,"colname":"X3"}],"colname":"X2"},{"name":"80+","children":[{"name":"Female","size":6.2898,"colname":"X3"},{"name":"Male","size":5.9539,"colname":"X3"}],"colname":"X2"}],"colname":"X1"}],"name":"root"},"options":{"legendOrder":null,"colors":{"range":["#0072B2","#E69F00","#009E73","#CC79A7","#D55E00","#ABB3B3","#B31044","#426878","#39393B","#647370","#96B3AD","#C5E6DF","#40615A","#DDF0E9","#F2F5F4","#407362","#083325"],"domain":["France","Germany","Italy","Singapore","USA","All countries","Female","Male","80+","70 - 79","50 - 69","26 - 49","18 - 25","12 - 17","6 - 11","3 - 5","0 - 2"]},"valueField":"size","percent":true,"count":false,"explanation":null,"breadcrumb":[],"legend":{"w":100},"sortFunction":null,"sumNodes":true},"tasks":["\nfunction(){\n  var chart = this.instance.chart;\n  var data = this.instance.json;\n  var el = this.el;\n  var svg = d3.select(el).select('.sunburst-chart>svg');\n\n  var btn = d3.select('#convert-btn')\n  \n  \n  btn.on('click.tree', function() {\n    var paths = svg.selectAll('path');\n    paths.each(function(d,i) {\n    debugger\n      var interpolate = flubber.interpolate(\n        d3.select(this).attr('d'),\n        [\n          [d.x0*120, Math.pow(d.y0,1/2)],\n          [d.x0*120, Math.pow(d.y1,1/2)],\n          [d.x1*120, Math.pow(d.y1,1/2)],\n          [d.x1*120, Math.pow(d.y0,1/2)],\n          [d.x0*120, Math.pow(d.y0,1/2)]\n        ]\n      );\n      d3.select(this)\n        .transition()\n        .delay(i * 20)\n        .duration(200)\n        .attr('transform','translate(-400,-200)')\n        .attrTween('d', function(d) {return interpolate});\n    })\n  });\n }\n\n"]},"evals":["tasks.0"],"jsHooks":{"render":[{"code":"\n    function(el,x){\n    d3.select(el).select('.sunburst-togglelegend').property('checked', true);\n    d3.select(el).select('.sunburst-legend').style('visibility', '');\n    document.getElementsByClassName('sunburst-sidebar')[0].childNodes[2].nodeValue = 'Country/Age/Sex';\n    }\n    ","data":null}]}}</script>
</body>
</html>
